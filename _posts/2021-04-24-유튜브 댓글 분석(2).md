---
layout: post
title: ìœ íŠœë¸Œ ëŒ“ê¸€ ë¶„ì„
categories: Data Analysis 
tags: 
 - Python
 - youtube
 - crawling
---

ì§€ë‚œ ìœ íŠœë¸Œ ëŒ“ê¸€ í¬ë¡¤ë§ì— ì´ì–´ ìˆ˜ì§‘ëœ ëŒ“ê¸€ì„ ë¶„ì„í•´ë³´ê¸°ë¡œ í–ˆë‹¤. 

### Part II. ì™¸ëª¨ í‰ê°€ ë¹„ìœ¨

#### 1. í•œ ì˜ìƒì—ì„œ ì™¸ëª¨ í‰ê°€ ë¹„ìœ¨ êµ¬í•˜ê¸°

```
def getEvaluationRatio(comments):
    cnt = 0 
    appear = ["í›ˆí›ˆ", "ì˜ìƒ", "ì˜ ìƒ", "ëª»ìƒ", "ëª» ìƒ", "ë¯¸ë‚¨", "ë¯¸ì¸", "ë¯¸ë…€", "ì™¸ëª¨", "ë¯¸ëª¨", "ì–¼êµ´", "ê·€ì—¬", "ê·€ì—½", "ê¹œì°", "ê·€ìš¤", "ê·€ì—¼", "ê·€ìš”ë¯¸", "ê·€ì²™", "ì¡¸ê·€", "ì´ë»", "ì˜ˆì˜", "ì´ì¨", "ì˜ˆìœ", "ì´ë¿Œ", "ë‹®", "ë§¤ë ¥", "ì„¹ì‹œ",  "ì‚¬ë‘ìŠ¤", "ì•„ë¦„ë‹¤"]
    for comment in comments:
        for a in appear:
            if a in comment:
                cnt += 1
    return round(cnt / len(comments) * 100, 2)

print(getEvaluationRatio(comments), "%")
```

#### 2. ì „ì²´ ì˜ìƒì—ì„œ ì™¸ëª¨í‰ê°€ ë¹„ìœ¨ êµ¬í•˜ê¸°

```
#í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ ì œëª©, id ì–»ê¸° 

from bs4 import BeautifulSoup
from selenium import webdriver as wd
import pandas as pd
def getPlayList(play_list_url):
    df = pd.DataFrame(columns=['title', 'id'])
    driver = wd.Chrome(executable_path="êµ¬ê¸€ ë“œë¼ì´ë¸Œ ìœ„ì¹˜")
    driver.get(play_list_url)
    html = driver.page_source
    soup = BeautifulSoup(html, 'html.parser')
    #print(soup)
    driver.close()
    
    id_list = []
    title_list = []
    video_list = soup.select("a#video-title")
    for video in video_list:
        title_list.append(video.get('title'))
        video_id = video.get('href').split("=")[1][:-5]
        id_list.append(video_id) 
    df['title'] = title_list
    df['id'] = id_list
    return df
```
```
url = "https://www.youtube.com/playlist?list=UU3dYEYtdihZpsexdC9-qKDA" #ì „ì²´ ì˜ìƒ ì£¼ì†Œ 
video_df = getPlayList(url)
video_df
```
ê²°ê³¼ 
```  
title	id
0	ë¯¸êµ­ì¦ì‹œ íœ˜ì²­ì´ê²Œ í•˜ëŠ” Block trade (ë¸”ë¡ íŠ¸ë ˆì´ë“œ) ì£¼ì˜ë³´	Pp5O8xc3KsE
1	ì•„ì‹œì•„ í˜ì˜¤ ë²”ì£„, ë¯¸êµ­ë‚´ ì•„ì‹œì•„ê³„ ì¸ì¢…ì°¨ë³„ì— ëŒ€í•œ ì§§ì€ ìƒê°	-fj_6XvtGNM
2	ì‹¤ë²„ ë²„íŠ¼ ì™”ë„¤ìš”?? ê·¸ê±´ ê·¸ë ‡ê³ ... ì¡´ë¦½ì„ ìœ„í˜‘í•˜ëŠ” ESGì™€ í”ë“¤ë¦¬ëŠ” ìœ ê°€ì— ëŒ€...	V1FWY87ddYU
3	ë¯¸êµ­ ì˜¨ë¼ì¸ ì¹´ì§€ë…¸ ìŠ¤í¬ì¸ ë² íŒ… ì£¼ì‹ ë“œë˜í”„íŠ¸í‚¹ DraftKings  ğ·ğ¾ğ‘ğº PE...	wIw4ROk38tU
4	íƒ€ì¡°ê°€ ë˜ì§€ ë§ì ft. íŒŒíƒ€ê³ ë‹ˆì•„ ì´ë²¤íŠ¸ ì¸ì¦ ì˜ìƒ	Zgz-rlUcLe8
...	...	...
64	í•­ê³µì‚¬ ë³´ì‰(BA) ì£¼ì‹ ì°¨íŠ¸ë¡œ ë³´ëŠ” íŠ¸ë ˆì´ë”ì˜ ì‹¬ë¦¬ê²Œì„ - ì£¼ê°€ì°¨íŠ¸ íŒ¨í„´ 101	X8EPa7M4Hpk
65	[ì¹´ì§€ë…¸ íˆ¬ì] í•˜ë½ì¥ì—ì„œë„ í—¤ì§€í€ë“œ, ë‚´ë¶€ì ë§¤ìˆ˜ í™œë°œí•œ ë¯¸êµ­ ì£¼ì‹ ì´ì•¼ê¸°	ejMkY11P2GI
66	[ë¯¸êµ­ì£¼ì‹] ë§¤ìˆ˜ â€œíƒ€ì´ë°â€ì´ ì˜ë¯¸ì—†ëŠ” ì´ìœ  - ë‰´ìš• í€ë“œë§¤ë‹ˆì €ì™€ ì „í™” í†µí™” (ì˜ì–´...	AnvcxzDBm4I
67	[ë¯¸êµ­ì£¼ì‹] í­ë½ì¥ ëŒ€ì²˜ë²• - ì›”ê°€ í€ë“œë§¤ë‹ˆì €ì™€ ì „í™” í†µí™” (ì˜ì–´ ì£¼ì˜)	t5GsMHlblp8
68	ì½”ë¡œë‚˜ì— í…… ë¹ˆ ì›”ìŠ¤íŠ¸ë¦¬íŠ¸ | íšŒì‚¬ë¹Œë”© ì…§ë‹¤ì›ƒ, ì‹ë‹¹ ì˜ì—…ê¸ˆì§€, ì´ì™€ì¤‘ì— ìµì‚¬ì´íŒ…í•œ...	-uUm4zGphaA
69 rows Ã— 2 columns
```
ê° ì˜ìƒ ì™¸ëª¨ í‰ê°€ ë¹„ìœ¨ êµ¬í•˜ê¸°
```
def getEvaRatio(video_df):
    eva_list = []
    for _id in video_df['id']:
        #print(_id)
        try:
            comm = getComment(_id)
            ratio = getEvaluationRatio(comm)
        except:
            ratio = '-'
        eva_list.append(ratio)
    video_df['eva'] = eva_list
    return video_df
```    
```
getEvaRatio(video_df)
```
ê²°ê³¼
```
title	id	eva
0	ë¯¸êµ­ì¦ì‹œ íœ˜ì²­ì´ê²Œ í•˜ëŠ” Block trade (ë¸”ë¡ íŠ¸ë ˆì´ë“œ) ì£¼ì˜ë³´	Pp5O8xc3KsE	6.61
1	ì•„ì‹œì•„ í˜ì˜¤ ë²”ì£„, ë¯¸êµ­ë‚´ ì•„ì‹œì•„ê³„ ì¸ì¢…ì°¨ë³„ì— ëŒ€í•œ ì§§ì€ ìƒê°	-fj_6XvtGNM	3.68
2	ì‹¤ë²„ ë²„íŠ¼ ì™”ë„¤ìš”?? ê·¸ê±´ ê·¸ë ‡ê³ ... ì¡´ë¦½ì„ ìœ„í˜‘í•˜ëŠ” ESGì™€ í”ë“¤ë¦¬ëŠ” ìœ ê°€ì— ëŒ€...	V1FWY87ddYU	13.84
3	ë¯¸êµ­ ì˜¨ë¼ì¸ ì¹´ì§€ë…¸ ìŠ¤í¬ì¸ ë² íŒ… ì£¼ì‹ ë“œë˜í”„íŠ¸í‚¹ DraftKings  ğ·ğ¾ğ‘ğº PE...	wIw4ROk38tU	11.69
4	íƒ€ì¡°ê°€ ë˜ì§€ ë§ì ft. íŒŒíƒ€ê³ ë‹ˆì•„ ì´ë²¤íŠ¸ ì¸ì¦ ì˜ìƒ	Zgz-rlUcLe8	17.87
...	...	...	...
64	í•­ê³µì‚¬ ë³´ì‰(BA) ì£¼ì‹ ì°¨íŠ¸ë¡œ ë³´ëŠ” íŠ¸ë ˆì´ë”ì˜ ì‹¬ë¦¬ê²Œì„ - ì£¼ê°€ì°¨íŠ¸ íŒ¨í„´ 101	X8EPa7M4Hpk	4.46
65	[ì¹´ì§€ë…¸ íˆ¬ì] í•˜ë½ì¥ì—ì„œë„ í—¤ì§€í€ë“œ, ë‚´ë¶€ì ë§¤ìˆ˜ í™œë°œí•œ ë¯¸êµ­ ì£¼ì‹ ì´ì•¼ê¸°	ejMkY11P2GI	13.76
66	[ë¯¸êµ­ì£¼ì‹] ë§¤ìˆ˜ â€œíƒ€ì´ë°â€ì´ ì˜ë¯¸ì—†ëŠ” ì´ìœ  - ë‰´ìš• í€ë“œë§¤ë‹ˆì €ì™€ ì „í™” í†µí™” (ì˜ì–´...	AnvcxzDBm4I	8.92
67	[ë¯¸êµ­ì£¼ì‹] í­ë½ì¥ ëŒ€ì²˜ë²• - ì›”ê°€ í€ë“œë§¤ë‹ˆì €ì™€ ì „í™” í†µí™” (ì˜ì–´ ì£¼ì˜)	t5GsMHlblp8	8.8
68	ì½”ë¡œë‚˜ì— í…… ë¹ˆ ì›”ìŠ¤íŠ¸ë¦¬íŠ¸ | íšŒì‚¬ë¹Œë”© ì…§ë‹¤ì›ƒ, ì‹ë‹¹ ì˜ì—…ê¸ˆì§€, ì´ì™€ì¤‘ì— ìµì‚¬ì´íŒ…í•œ...	-uUm4zGphaA	7.81
69 rows Ã— 3 columns
```

ì™¸ëª¨ í‰ê°€ ë¹„ìœ¨ì´ ì—†ëŠ” ì˜ìƒì€ ë‹¨ í•œê±´ë„ ì—†ì—ˆë‹¤. 

